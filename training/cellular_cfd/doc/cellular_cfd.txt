





PLANNING FOR CFD

Above we have covered grid resolution and its implications for the trade-off between accuracy and run time.
However, there are other elements that must be considered when planning a building model for CFD.

Firstly, in order to conflate CFD with a mass flow network the exact positions of the inter-zone air flow 
openings must be defined within the CFD domain in terms of cells.  For example, in the corridor there is a
mechanical extract.  This is explicitly modelled, with its own distinct surface in the building model that
just happens to correspond exactly with a few cells in the CFD grid; how very convenient.  This is a classic
example of planning for CFD.  Even if that is not the exact location of the extract, it is preferable to move
it slightly in the building model and have it line up nicely with the CFD grid, as this allows the opening 
area in the mass flow network and the area of the corresponding opening in the CFD domain to match up.

However, what about the window openings and the door cracks?  These are not explicitly defined in the building
model, so how do we represent them in the CFD domain?  Well, we need to make some assumptions.  In this 
model it is assumed that air flow through the door cracks occurs at the bottom of the door, as this is often
where the largest gap around a door is in practice.  For the windows, it is assumed that the high window
opening is at the very top of the window, and the low window opening is at the very bottom.  This seems like a
reasonable assumption, but how do we know this is true?  Essentially we don't, and this leads us to our next
conclusion; model as explicitly as you can and you reduce the need for assumptions.  If the model were to 
give us more detail on the window, for example a sash window for the lower and a smaller tilting window for the
upper, this would give us a far better idea of where exactly the openings would be and how big they would be.
This would give us much greater confidence to assign them to specific cells in the CFD domain.

Finally, there is edge matching on opposite faces.  The CFD gridding in ESP-r is constrained to be orthogonal 
in both horizontal dimensions; so you can only have 90-degree angled quadrilateral cells from a plan view.  
This means that for the CFD gird to match up with the building model most effectively, the edges of the room 
surfaces on all four walls should match the grid cell boundaries as closely as possible.  For example, the 
offices have 0.4m of wall space on the partition with the corridor, followed by a 0.8m wide door.  Even with 
the coarse CFD grid, which has a grid dimension of 0.2m in this dimension, this matches up nicely; 2 cells 
width for the wall and 4 cells width for the door.  However what if the door was moved over by 0.1m, so there 
was 0.3m of wall space then the 0.8m wide door then another 0.1m of wall space?  This would move the surface 
edges off the CFD grid boundaries. Now an obvious solution to this would be to adjust the cell sizes to 
compensate, but what if there was a surface edge on the opposite wall in the 0.4m position?  By adjusting the 
cell sizes we would then throw off the edge matching for this surface.  This leads us to our third conclusion; 
when planning for CFD try to consider how the surface edges on opposite faces will match up.  If they will be 
slightly off, it may be better to just move the boundary slightly to match; even if this means moving a wall 
slightly or moving a door over a little, a small change in model geometry is not likely to have a huge effect 
on the predictions of the model.

SUMMARY

When creating a building model that you intend to include CFD in, you will find that you can avoid many 
headaches by planning the model thoroughly, with CFD in mind, before you build it.  The main points to consider
are:
1. What will your grid resolution be?  Do you want a fine grid to analyse the air flow in the room to a high 
   degree of detail, but which will take a long time to simulate?  Or do you want a coarse a grid that will not
   model the room in detail, but which will simulate much quicker?  Often the best answer is somewhere in 
   between these two extremes.
2. Where and what size will your air flow openings be?  It is often convenient to represent these explicitly in
   the model, so you can then match the edges up to cell boundaries as in step 3.
3. Will your surface edges match up to CFD grid cell boundaries, especially on opposite faces of the room?  If
   not, consider moving some of the edges slightly to make them match.
